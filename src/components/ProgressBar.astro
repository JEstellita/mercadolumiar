---
const { total = 0, goal = 150, supporters = 0, stale = false } = Astro.props;
const pct = Math.min(100, Math.round((total/goal)*100));
---
<section 
  style="padding:1rem; border:1px solid #1f1f1f; border-radius:1rem;"
  data-total={total}
  data-goal={goal}
  data-supporters={supporters}
>
  <div style="display:flex; justify-content:space-between; margin-bottom:.5rem;">
    <h3 style="margin:0">Progresso da campanha</h3><span>{pct}%</span>
  </div>
  <div style="width:100%; height:12px; background:#1b1b1b; border-radius:8px;">
    <div style={`width:${pct}%; height:12px; background:var(--accent); border-radius:8px; transition:width .5s`}></div>
  </div>
  <p style="margin:.6rem 0 0;">
    <strong>R$ {total.toFixed(2)}</strong> de R$ {goal}/mês • {supporters} assinantes
    {stale && <span style="margin-left:.5rem; opacity:.7">(atualizando…)</span>}
  </p>
</section>